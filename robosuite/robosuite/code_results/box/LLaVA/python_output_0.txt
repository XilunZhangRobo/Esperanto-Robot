
import cv2
import numpy as np
import math

# Load the image
img = cv2.imread('cubes.jpg')

# Convert the image to grayscale
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

# Define the threshold values for the cubes
threshold1 = 100
threshold2 = 150

# Define the size of the cubes
cube_size = 0.02

# Define the table size
table_size = 0.8

# Define the table center
table_center = (table_size / 2, table_size / 2)

# Define the robot arm's coordinate system
robot_x = 0
robot_y = 0

# Define the robot arm's gripper
gripper_x = 0
gripper_y = 0

# Define the robot arm's movement parameters
movement_speed = 0.1

# Define the robot arm's stacking parameters
stacking_order = [0, 1]

# Define the robot arm's stacking function
def stack_cubes(cubes, table_center, robot_x, robot_y, gripper_x, gripper_y, stacking_order):
    # Initialize the stacking sequence
    sequence = []
    
    # Iterate through the cubes
    for i in range(len(cubes)):
        # Get the current cube's position
        cube_x, cube_y = cubes[i]
        
        # Check if the cube is within the table boundaries
        if (cube_x < table_size or cube_x > table_size or cube_y < table_size or cube_y > table_size):
            continue
        
        # Check if the cube is within the robot arm's reach
        if (abs(cube_x - table_center[0]) > robot_x or abs(cube_y - table_center[1]) > robot_y):
            continue
        
        # Check if the cube is in the correct order for stacking
        if (i not in stacking_order):
            continue
        
        # Add the cube to the stacking sequence
        sequence.append((cube_x, cube_y))
        
        # Move the robot arm to the current cube's position
        robot_x = cube_x
        robot_y = cube_y
        
        # Move the gripper to the current cube's position
        gripper_x = cube_x
        gripper_y = cube_y
        
        # Move the robot arm to the correct position for stacking
        robot_x += movement_speed
        robot_y += movement_speed
        
        # Move the gripper to the correct position for stacking
        gripper_x += movement_